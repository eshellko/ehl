<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Архитектура</title>
   </head>
   <body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
      <div class="article">
         <div class="titlepage">
            <h2 class="title">Архитектура</h2>
         </div>
      </div>
      <p>
         <b>ehl_fifo</b> состоит из 3 структурных частей: контроллера записи в буфер (<b>fifo_wc</b>), контроллера чтения из буфера (<b>fifo_rc</b>) и буфера (<b>fifo_buf</b>). Контроллер записи и буфер тактируются синхросигналом <b>wclk</b>, а контроллер чтения синхросигналом <b>rclk</b>.
      </p>
      <p><b>Основные возможности</b>:</p>
      <li>Полностью синхронная схема</li>
      <li>Операции записи/чтения в буфер за 1 такт</li>
      <li>Независимая параметризация ширины шин данных для записи и чтения</li>
      <li>Параметризация глубины буфера</li>
      <li>Параметризация количества стадий синхронизации</li>
      <li>Флаги заполнения и опустошения, синхронизованные с обоими доменами синхросигналов</li>
      <li>Флаги переполнения <b>w_overflow</b> и <b>r_underflow</b></li>
      <li>Счетчики занятых и свободных ячеек буфера</li>
<!--       <li>Возможность использования блоков ОЗУ вместо буфера fifo_buf</li> -->

      <p><b>Области применения</b>:</p>
      <li>В качестве буферов в приемо-передатчиках для синхронизации</li>
      <li>Передача данных между разными доменами синхросигналов</li>
      <li>В схемах типа SERDES</li>

      <p> Структурная схема </p>
<!-- todo: add all signals!!! -->
      <img src="um_fifo.png">
      <p> <b>ehl_fifo</b> состоит из блоков: <b>fifo_rc</b>, <b>fifo_wc</b> и <b>fifo_buf</b>. </p>
      <p> Контроллер записи в буфер <b>fifo_wc</b> выполняет следующие функции: </p>
      <li> формирование адреса записи буфера,</li>
      <li> формирование флага заполненнения буфера и флага переполнения,</li>
      <li> синхронизация с контроллером чтения.</li>
      <p>Контроллер чтения из буфера <b>fifo_rc</b> выполняет следующие функции:</p>
      <li> формирование адреса чтения буфера,</li>
      <li> формирование флага опустошения буфера и флага переполнения по опустошению,</li>
      <li> синхронизация с контроллером записи.</li>
      <p>Буфер <b>fifo_buf</b> выполняет следующие функции:</p>
      <li> хранение данных,</li>
      <li> выдача данных.</li>
      <p></p>
      <p></p>

      <table summary="generic" cellpadding="4" width="0%" border="1" cellspacing="0" rules="all">
         <colgroup><col><col><col><col></colgroup>
         <thead>
            <tr bgcolor="#C0C0C0">
               <th>Название</th>
               <th>Количество</th>
               <th>Тип</th>
               <th>Назначение</th>
            </tr>
         </thead>
         <tbody>
            <tr> <td>wclk</td>         <td>1</td> <td>I</td> <td>Тактовый сигнал интерфейса записи в буфер. Все триггеры в fifo_wc и fifo_buf тактируются нарастающим фронтом этого синхросигнала.</td> </tr>
            <tr> <td>rclk</td>         <td>1</td> <td>I</td> <td>Тактовый сигнал интерфейса чтения из буфера. Все триггера в fifo_rc тактируются нарастающим фронтом этого синхросигнала.</td> </tr>
            <tr> <td>w_reset_n</td>    <td>1</td> <td>I</td> <td>Активный низким уровнем сигнал асинхронного сброса в тактовом домене wclk.</td> </tr>
            <tr> <td>r_reset_n</td>    <td>1</td> <td>I</td> <td>Активный низким уровнем сигнал асинхронного сброса в тактовом домене rclk.</td> </tr>
            <tr> <td>clr_of</td>       <td>1</td> <td>I</td> <td>Активный высоким уровнем сигнал синхронного сброса флага w_overflow.</td> </tr>
            <tr> <td>clr_uf</td>       <td>1</td> <td>I</td> <td>Активный высоким уровнем сигнал синхронного сброса флага r_underflow.</td> </tr>
            <tr> <td>rd</td>           <td>1</td> <td>I</td> <td>Активный высоким уровнем запрос чтения буфера.</td> </tr>
            <tr> <td>wr</td>           <td>1</td> <td>I</td> <td>Активный высоким уровнем запрос записи в буфер.</td> </tr>
            <tr> <td>wdat</td>         <td>WIDTH_DIN</td> <td>I</td> <td>Данные, записываемые в буфер.</td> </tr>
            <tr> <td>r_empty</td>      <td>1</td> <td>O</td> <td>Флаг опустошения буфера, синхронизованный с rclk.</td> </tr>
            <tr> <td>w_empty</td>      <td>1</td> <td>O</td> <td>Флаг опустошения буфера, синхронизованный с wclk.</td> </tr>
            <tr> <td>r_full</td>       <td>1</td> <td>O</td> <td>Флаг заполнения буфера, синхронизованный с rclk.</td> </tr>
            <tr> <td>w_full</td>       <td>1</td> <td>O</td> <td>Флаг заполнения буфера, синхронизованный с wclk.</td> </tr>
            <tr> <td>r_aempty</td>     <td>1</td> <td>O</td> <td>Флаг заполнения одной ячейки буфера, синхронизованный с rclk.</td> </tr>
            <tr> <td>w_aempty</td>     <td>1</td> <td>O</td> <td>Флаг заполнения одной ячейки буфера, синхронизованный с wclk.</td> </tr>
            <tr> <td>r_afull</td>      <td>1</td> <td>O</td> <td>Флаг наличия одной свободной ячейки в буфере, синхронизованный с rclk.</td> </tr>
            <tr> <td>w_afull</td>      <td>1</td> <td>O</td> <td>Флаг наличия одной свободной ячейки в буфере, синхронизованный с wclk.</td> </tr>
            <tr> <td>w_overflow</td>   <td>1</td> <td>O</td> <td>Флаг ошибки записи буфера.</td> </tr>
            <tr> <td>r_underflow</td>  <td>1</td> <td>O</td> <td>Флаг ошибки чтения буфера.</td> </tr>
            <tr> <td>rdat</td>         <td>WIDTH_DOUT</td> <td>O</td> <td>Данные, читаемые из  буфера.</td> </tr>
            <tr> <td>write_credit</td> <td>log2(WIDTH_DIN>WIDTH_DOUT ? DEPTH*(WIDTH_DIN/WIDTH_DOUT) : DEPTH)</td> <td>O</td> <td>Количество свободных ячеек в буфере (количество возможных операций записи в буфер).</td> </tr>
         </tbody>
      </table>
      <p></p>

   </body>
</html>
